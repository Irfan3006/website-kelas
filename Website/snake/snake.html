<!DOCTYPE html>
<html lang="in">
<head>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous"><meta charset="utf-8" />
    <link rel="icon" type="image/x-icon" href="/images/log0.png">
<title>GAME ULAR</title>
<style type="text/css">
body {text-align:center;}
canvas { border:5px solid #ccc; } 
h1 { font-size:50px; text-align: center; margin: 0; padding-bottom: 25px;}
</style> 
<nav class="navbar navbar-expand-lg navbar-light text-light bg-primary" >
    <div class="container-fluid">
      <a class="navbar-brand text-light" href="/">TKJ 24</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <ul class="navbar-nav me-auto mb-2 mb-lg-0">
          <li class="nav-item">
            <a class="nav-link active text-light" aria-current="page" href="/">Home</a>
          </li>
          <li class="nav-item">
            <a class="nav-link text-light" href="/about/">About</a>
          </li>
          <li class="nav-item">
            <a class="nav-link text-light" href="/blog/">Blog</a>
          </li>
        </li>
        <li class="nav-item">
          <a class="nav-link text-light" href="/snake/snake.html">Games</a>
        </li>
          <li class="nav-item">
            <a class="nav-link text-light" href="/perpus/">ePerpus</a>
          </li>
          <li class="nav-item">
            <a class="nav-link text-light" href="https://limfilm30.blogspot.com/" target="_blank">eMovies</a>
          </li>
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle text-light" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
              Others
            </a>
            <ul class="dropdown-menu">
              <li><a class="dropdown-item" href="/contact/">Contact</a></li>
              <li><hr class="dropdown-divider"></li>
              <li><a class="dropdown-item" href="/gallery/">Gallery</a></li>
              <li><hr class="dropdown-divider"></li>
              <li><a class="dropdown-item" href="/sosmed/">Sosmed</a></li>
            </ul>
          </li>
        </ul>
        <form class="d-flex" role="search">
          <input class="form-control me-2" type="search" placeholder="Search" aria-label="Search">
          <button class="btn btn-outline-light text-dark" type="submit">Search</button>
        </form>
      </div>
    </div>
  </nav>

  <div class="alert alert-danger" role="alert">
  GAME INI <b>TIDAK</b> SUPPORT ANDROID/IOS
  </div>

<script type="text/javascript">
function play_game()
{   
var level = 160; // level game
var rect_w = 45; // lebar
var rect_h = 30; // tinggi
var inc_score = 50; // score
var snake_color = "#9dc425"; // warna ular
var ctx; // attribute canvas
var tn = []; // penyimpanan arah sementara
var x_dir = [-1, 0, 1, 0]; // penyesuaian posisi horizontal
var y_dir = [0, -1, 0, 1]; // penyesuaian posisi vertikal
var queue = [];
var frog = 5; // default tubuh ular
var map = [];
var MR = Math.random;
var X = 5 + (MR() * (rect_w - 10))|0; // menghitung posisi
var Y = 5 + (MR() * (rect_h - 10))|0; // menghitung posisi
var direction = MR() * 3 | 0;
var interval = 0;
var score = 0;
var sum = 0, easy = 0;
var i, dir;
// Mendapatkan area game
var c = document.getElementById('playArea');
ctx = c.getContext('2d');
// Posisi peta
for (i = 0; i < rect_w; i++)
{
map[i] = [];
}
// penempatan makanan ular secara acak
function rand_frog()
{
var x, y;
do
{
x = MR() * rect_w|0;
y = MR() * rect_h|0;
}
while (map[x][y]);
map[x][y] = 1;
ctx.fillStyle = snake_color;
ctx.strokeRect(x * 10+1, y * 10+1, 8, 8);
}
//fungsi game speed
rand_frog();
function set_game_speed()
{
if (easy)
{
X = (X+rect_w)%rect_w;
Y = (Y+rect_h)%rect_h;
}
--inc_score;
if (tn.length)
{
dir = tn.pop();
if ((dir % 2) !== (direction % 2))
{
direction = dir;
}
}
if ((easy || (0 <= X && 0 <= Y && X < rect_w && Y < rect_h)) && 2 !== map [X][Y])
{
if (1 === map[X][Y])
{
score+= Math.max(5, inc_score);
inc_score = 50;
rand_frog();
frog++;
}
//ctx.fillStyle("#ffffff");
ctx.fillRect(X * 10, Y * 10, 9, 9);
map[X][Y] = 2;
queue.unshift([X, Y]); 
X+= x_dir[direction];
Y+= y_dir[direction];
if (frog < queue.length)
{
dir = queue.pop()
map[dir[0]][dir[1]] = 0;
ctx.clearRect(dir[0] * 10, dir[1] * 10, 10, 10);
}
}
else if (!tn.length)
{
var msg_score = document.getElementById("msg");
msg_score.innerHTML = "HAHAHAHAHA NOOB MATI MULU<br />Skor anda :<b>"+score+"</b><br /><br /><input type='button' value='Main LAGI' onclick='window.location.reload();' />";   
document.getElementById("playArea").style.display = 'none';
window.clearInterval(interval);
}
}
interval = window.setInterval(set_game_speed, level);
document.onkeydown = function(e) {
var code = e.keyCode - 37;
if (0 <= code && code < 4 && code !== tn[0]) 
{
tn.unshift(code);
}
else if (-5 == code)
{
if (interval)
{
window.clearInterval(interval);
interval = 0;
}
else
{
interval = window.setInterval(set_game_speed, 60);  
}     
}
else
{
dir = sum + code;
if (dir == 44||dir==94||dir==126||dir==171) {
sum+= code
} else if (dir === 218) easy = 1;
}
}
}
</script>
</head>
<body onLoad="play_game()">
<h1>Game ular</h1>
<div id="msg"></div>
<canvas id="playArea" width="450" height="300">Maaf, browser Anda tidak mendukung HTML5</canvas>        
<p>Kendalikan ular dengan tombol panah. Tekan <B>'SPACE'</B> untuk pause dan menambah kecepatan ular</p>
<footer>
  <h1 class="text-center">&copy; 2023 by Irfan Syarifudin. All rights reserved.</h1>
</footer><script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-HwwvtgBNo3bZJJLYd8oVXjrBZt8cqVSpeBNS5n7C8IVInixGAoxmnlMuBnhbgrkm" crossorigin="anonymous"></script>
</body>
</html> 